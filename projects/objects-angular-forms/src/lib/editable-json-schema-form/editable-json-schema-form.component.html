<div
  *ngIf="entity"
  libEditableForm
  [initialEditMode]="isInCreation"
  #libEditableForm="EditableFormDirective"
>
  <div *ngIf="error" class="alert alert-danger" role="alert">
    {{ error }}
  </div>
  <lib-json-form
    [data]="valueView"
    [schema]="schemaJsonView"
    *ngIf="valueView && libEditableForm.isViewMode"
    [uischema]="uischemaJsonView"
  ></lib-json-form>
  <lib-json-form
    [data]="valueEdit"
    [schema]="schemaJsonEdit"
    *ngIf="valueEdit && libEditableForm.isEditMode"
    [uischema]="uischemaJsonEdit"
    (valueChanged)="valueEditChange($event)"
  ></lib-json-form>

  <button
    class="btn mr-2 mt-2"
    [class.btn-primary]="libEditableForm.isViewMode"
    [class.btn-secondary]="libEditableForm.isEditMode"
    [innerHTML]="libEditableForm.isEditMode ? 'Cancel' : 'Edit'"
    [disabled]="!isInCreation && libEditableForm.hasActionDisabled"
    (click)="switchMode()"
  ></button>
  <button
    *ngIf="libEditableForm.isEditMode"
    type="button"
    class="btn btn-primary mr-2 mt-2"
    (click)="saveEditMode()"
    [disabled]="!isValid"
    [innerHTML]="isInCreation ? 'Create' : 'Save'"
  >
    Save
  </button>
  <button
    *ngIf="libEditableForm.isViewMode && deleteValue"
    type="button"
    class="btn mr-2 mt-2"
    (click)="openModal(confirmDelete)"
    [innerHTML]="'Delete'"
    [disabled]="libEditableForm.hasActionDisabled"
  >
    Save
  </button>
</div>
<ng-template #confirmDelete>
  <div class="modal-body text-center">
    <p>Do you want to confirm?</p>
    <button type="button" class="btn btn-primary" (click)="delete()">
      Yes
    </button>
    <button
      type="button"
      class="btn btn-default mr-2"
      (click)="modalRef.hide()"
    >
      No
    </button>
  </div>
</ng-template>
